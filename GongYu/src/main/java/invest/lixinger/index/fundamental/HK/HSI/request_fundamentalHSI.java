package invest.lixinger.index.fundamental.HK.HSI;

import invest.lixinger.index.fundamental.HK.HSI.VO.fundamentalHSIResult_DataVO;
import invest.lixinger.index.fundamental.HK.HSI.VO.fundamentalHSIResult_RootVO;
import invest.lixinger.index.fundamental.US.spx.VO.fundamentalSPXResult_DataVO;
import invest.lixinger.index.fundamental.US.spx.VO.fundamentalSPXResult_RootVO;
import invest.lixinger.utils.netRequest;
import org.yaml.snakeyaml.Yaml;

import java.io.IOException;
import java.io.InputStream;
import java.text.DecimalFormat;
import java.text.ParseException;
import java.util.Map;

/**
 * 获取单一日期的 沪深A股 信号
 */
public class request_fundamentalHSI {
    public static void main(String[] args) throws IOException, ParseException {
        InputStream inputStream = request_fundamentalHSI.class.getClassLoader().getResourceAsStream("indexReqParam.yml");
        Map indexReqParam = new Yaml().load(inputStream);
        String fundamentalHSIURL = (String) indexReqParam.get("fundamentalHSIURL");
        String paramJson = getParam_fundamentalHSI.getSingleIndexParamJson();
        String resultJson = netRequest.jsonNetPost(fundamentalHSIURL, paramJson);
//        String resultJson = "{\"code\":1,\"message\":\"success\",\"data\":[{\"date\":\"2022-12-02T00:00:00+08:00\",\"pb\":{\"y10\":{\"median\":{\"avgv\":1.3374919720993148,\"cv\":1.3469516090048725,\"cvpos\":0.586515028432169,\"maxpv\":2.069070952857282,\"maxv\":2.069070952857282,\"minv\":0.8877918779090501,\"q2v\":1.1740450450533184,\"q5v\":1.3068458440470567,\"q8v\":1.531597399962167}},\"y20\":{\"median\":{\"avgv\":1.5503823371249033,\"cv\":1.3469516090048725,\"cvpos\":0.36216325703868746,\"maxpv\":2.918064158946419,\"maxv\":2.918064158946419,\"minv\":0.8877918779090501,\"q2v\":1.2339939897597763,\"q5v\":1.4738403193246419,\"q8v\":1.8763014292101567}}},\"pe_ttm\":{\"y10\":{\"median\":{\"avgv\":14.348702639130565,\"cv\":13.556077075682696,\"cvpos\":0.5060926076360682,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":9.535009809828047,\"q2v\":12.214519796396381,\"q5v\":13.528386979175238,\"q8v\":16.32801694462505}},\"y20\":{\"median\":{\"avgv\":14.839932964608655,\"cv\":13.556077075682696,\"cvpos\":0.3872797245290662,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":6.905404623928467,\"q2v\":12.380730038531832,\"q5v\":14.238407613741876,\"q8v\":16.853718508321144}}},\"ps_ttm\":{\"y10\":{\"median\":{\"avgv\":2.572962603322419,\"cv\":1.9175657433473794,\"cvpos\":0.041429731925264016,\"maxpv\":3.5613399498054594,\"maxv\":3.5613399498054594,\"minv\":1.402881599481208,\"q2v\":2.2009507561861414,\"q5v\":2.5782053163739755,\"q8v\":2.9509386470367893}},\"y20\":{\"median\":{\"avgv\":3.7347883106722417,\"cv\":1.9175657433473794,\"cvpos\":0.020660320032408346,\"maxpv\":8.216795669992614,\"maxv\":8.216795669992614,\"minv\":1.402881599481208,\"q2v\":2.4714766919623146,\"q5v\":3.0080032916934742,\"q8v\":5.428502607977522}}},\"stockCode\":\"HSI\"},{\"date\":\"2022-12-01T00:00:00+08:00\",\"pb\":{\"y10\":{\"median\":{\"avgv\":1.337488129842245,\"cv\":1.3615071958020988,\"cvpos\":0.617635107679805,\"maxpv\":2.069070952857282,\"maxv\":2.069070952857282,\"minv\":0.8877918779090501,\"q2v\":1.1740450450533184,\"q5v\":1.3068100557379618,\"q8v\":1.531597399962167}},\"y20\":{\"median\":{\"avgv\":1.5504235424577208,\"cv\":1.3615071958020988,\"cvpos\":0.3826985413290113,\"maxpv\":2.918064158946419,\"maxv\":2.918064158946419,\"minv\":0.8877918779090501,\"q2v\":1.2339939897597763,\"q5v\":1.4739967746501792,\"q8v\":1.8763014292101567}}},\"pe_ttm\":{\"y10\":{\"median\":{\"avgv\":14.34902458290126,\"cv\":13.482800983381706,\"cvpos\":0.4953271028037383,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":9.535009809828047,\"q2v\":12.214519796396381,\"q5v\":13.52359908660831,\"q8v\":16.32801694462505}},\"y20\":{\"median\":{\"avgv\":14.840193012388468,\"cv\":13.482800983381706,\"cvpos\":0.37682333873581847,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":6.905404623928467,\"q2v\":12.380730038531832,\"q5v\":14.238407613741876,\"q8v\":16.853718508321144}}},\"ps_ttm\":{\"y10\":{\"median\":{\"avgv\":2.573228808383335,\"cv\":1.9659755377095853,\"cvpos\":0.05851279967492889,\"maxpv\":3.5613399498054594,\"maxv\":3.5613399498054594,\"minv\":1.402881599481208,\"q2v\":2.201104973866828,\"q5v\":2.578239728415858,\"q8v\":2.9509386470367893}},\"y20\":{\"median\":{\"avgv\":3.7351563930233302,\"cv\":1.9659755377095853,\"cvpos\":0.029173419773095625,\"maxpv\":8.216795669992614,\"maxv\":8.216795669992614,\"minv\":1.402881599481208,\"q2v\":2.4715261142527205,\"q5v\":3.0084819295439207,\"q8v\":5.428502607977522}}},\"stockCode\":\"HSI\"},{\"date\":\"2022-11-30T00:00:00+08:00\",\"pb\":{\"y10\":{\"median\":{\"avgv\":1.3375424989699491,\"cv\":1.3458319484820092,\"cvpos\":0.5835026412027631,\"maxpv\":2.069070952857282,\"maxv\":2.069070952857282,\"minv\":0.8877918779090501,\"q2v\":1.1740450450533184,\"q5v\":1.3068100557379618,\"q8v\":1.531597399962167}},\"y20\":{\"median\":{\"avgv\":1.550461815623575,\"cv\":1.3458319484820092,\"cvpos\":0.3596757852077001,\"maxpv\":2.918064158946419,\"maxv\":2.918064158946419,\"minv\":0.8877918779090501,\"q2v\":1.2339939897597763,\"q5v\":1.474030674475416,\"q8v\":1.8763014292101567}}},\"pe_ttm\":{\"y10\":{\"median\":{\"avgv\":14.349552204802285,\"cv\":13.159623490172253,\"cvpos\":0.4477854530678586,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":9.535009809828047,\"q2v\":12.214519796396381,\"q5v\":13.528949521773459,\"q8v\":16.32801694462505}},\"y20\":{\"median\":{\"avgv\":14.840468010773598,\"cv\":13.159623490172253,\"cvpos\":0.3177304964539007,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":6.905404623928467,\"q2v\":12.380730038531832,\"q5v\":14.238407613741876,\"q8v\":16.853718508321144}}},\"ps_ttm\":{\"y10\":{\"median\":{\"avgv\":2.5735682271711693,\"cv\":2.011695899051669,\"cvpos\":0.07192198293376677,\"maxpv\":3.5613399498054594,\"maxv\":3.5613399498054594,\"minv\":1.402881599481208,\"q2v\":2.2019359473460707,\"q5v\":2.578385768333824,\"q8v\":2.9509386470367893}},\"y20\":{\"median\":{\"avgv\":3.73551481702157,\"cv\":2.011695899051669,\"cvpos\":0.035866261398176294,\"maxpv\":8.216795669992614,\"maxv\":8.216795669992614,\"minv\":1.402881599481208,\"q2v\":2.472122594129814,\"q5v\":3.0088845492816905,\"q8v\":5.428502607977522}}},\"stockCode\":\"HSI\"},{\"date\":\"2022-11-29T00:00:00+08:00\",\"pb\":{\"y10\":{\"median\":{\"avgv\":1.3376092885717945,\"cv\":1.3322176541326016,\"cvpos\":0.5587159691182446,\"maxpv\":2.069070952857282,\"maxv\":2.069070952857282,\"minv\":0.8877918779090501,\"q2v\":1.1740450450533184,\"q5v\":1.3068100557379618,\"q8v\":1.531597399962167}},\"y20\":{\"median\":{\"avgv\":1.5503963031209944,\"cv\":1.3322176541326016,\"cvpos\":0.3436676798378926,\"maxpv\":2.918064158946419,\"maxv\":2.918064158946419,\"minv\":0.8877918779090501,\"q2v\":1.2337622918344127,\"q5v\":1.474030674475416,\"q8v\":1.8763014292101567}}},\"pe_ttm\":{\"y10\":{\"median\":{\"avgv\":14.350100061377693,\"cv\":13.110459267917564,\"cvpos\":0.43600162535554654,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":9.535009809828047,\"q2v\":12.214519796396381,\"q5v\":13.530131803946743,\"q8v\":16.32801694462505}},\"y20\":{\"median\":{\"avgv\":14.841040261701254,\"cv\":13.110459267917564,\"cvpos\":0.30942249240121583,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":6.905404623928467,\"q2v\":12.380730038531832,\"q5v\":14.238429554937612,\"q8v\":16.853718508321144}}},\"ps_ttm\":{\"y10\":{\"median\":{\"avgv\":2.573879562529384,\"cv\":1.933702341468115,\"cvpos\":0.04632263307598537,\"maxpv\":3.5613399498054594,\"maxv\":3.5613399498054594,\"minv\":1.402881599481208,\"q2v\":2.20238165786661,\"q5v\":2.5785028430059604,\"q8v\":2.9509386470367893}},\"y20\":{\"median\":{\"avgv\":3.7359625317834446,\"cv\":1.933702341468115,\"cvpos\":0.023100303951367782,\"maxpv\":8.216795669992614,\"maxv\":8.216795669992614,\"minv\":1.402881599481208,\"q2v\":2.4729200876306363,\"q5v\":3.0093522216705226,\"q8v\":5.428502607977522}}},\"stockCode\":\"HSI\"},{\"date\":\"2022-11-28T00:00:00+08:00\",\"pb\":{\"y10\":{\"median\":{\"avgv\":1.3376856436763582,\"cv\":1.2951693291954591,\"cvpos\":0.46769605851279966,\"maxpv\":2.069070952857282,\"maxv\":2.069070952857282,\"minv\":0.8877918779090501,\"q2v\":1.1740450450533184,\"q5v\":1.3068100557379618,\"q8v\":1.531597399962167}},\"y20\":{\"median\":{\"avgv\":1.5503399782370686,\"cv\":1.2951693291954591,\"cvpos\":0.29118541033434653,\"maxpv\":2.918064158946419,\"maxv\":2.918064158946419,\"minv\":0.8877918779090501,\"q2v\":1.2337544400435774,\"q5v\":1.474030674475416,\"q8v\":1.8763014292101567}}},\"pe_ttm\":{\"y10\":{\"median\":{\"avgv\":14.35061803140925,\"cv\":13.044906971577976,\"cvpos\":0.4242177976432345,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":9.535009809828047,\"q2v\":12.214519796396381,\"q5v\":13.532518833504762,\"q8v\":16.32801694462505}},\"y20\":{\"median\":{\"avgv\":14.841563415803343,\"cv\":13.044906971577976,\"cvpos\":0.3001013171225937,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":6.905404623928467,\"q2v\":12.380730038531832,\"q5v\":14.239519709613992,\"q8v\":16.853718508321144}}},\"ps_ttm\":{\"y10\":{\"median\":{\"avgv\":2.5742138798470493,\"cv\":1.7782667273012225,\"cvpos\":0.019910605444941082,\"maxpv\":3.5613399498054594,\"maxv\":3.5613399498054594,\"minv\":1.402881599481208,\"q2v\":2.203869982170527,\"q5v\":2.578508632207548,\"q8v\":2.9509386470367893}},\"y20\":{\"median\":{\"avgv\":3.736421373899024,\"cv\":1.7782667273012225,\"cvpos\":0.009929078014184398,\"maxpv\":8.216795669992614,\"maxv\":8.216795669992614,\"minv\":1.402881599481208,\"q2v\":2.4732926432263502,\"q5v\":3.009482423141586,\"q8v\":5.428502607977522}}},\"stockCode\":\"HSI\"},{\"date\":\"2022-11-25T00:00:00+08:00\",\"pb\":{\"y10\":{\"median\":{\"avgv\":1.337872292775148,\"cv\":1.3451861445710607,\"cvpos\":0.5800162469536961,\"maxpv\":2.069070952857282,\"maxv\":2.069070952857282,\"minv\":0.8877918779090501,\"q2v\":1.1740450450533184,\"q5v\":1.3069079422076932,\"q8v\":1.531732357638711}},\"y20\":{\"median\":{\"avgv\":1.550069954364045,\"cv\":1.3451861445710607,\"cvpos\":0.35892242252379986,\"maxpv\":2.918064158946419,\"maxv\":2.918064158946419,\"minv\":0.8877918779090501,\"q2v\":1.2334892036017695,\"q5v\":1.4738403193246419,\"q8v\":1.8763014292101567}}},\"pe_ttm\":{\"y10\":{\"median\":{\"avgv\":14.351276321200023,\"cv\":13.176011564257152,\"cvpos\":0.4476035743298132,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":9.535009809828047,\"q2v\":12.214519796396381,\"q5v\":13.535883333988355,\"q8v\":16.32801694462505}},\"y20\":{\"median\":{\"avgv\":14.842405026274959,\"cv\":13.176011564257152,\"cvpos\":0.3182094389305246,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":6.905404623928467,\"q2v\":12.380730038531832,\"q5v\":14.243612021635956,\"q8v\":16.853718508321144}}},\"ps_ttm\":{\"y10\":{\"median\":{\"avgv\":2.5747157249363433,\"cv\":1.6651699259708335,\"cvpos\":0.008123476848090982,\"maxpv\":3.5613399498054594,\"maxv\":3.5613399498054594,\"minv\":1.402881599481208,\"q2v\":2.2041113860583463,\"q5v\":2.578617772959797,\"q8v\":2.9509386470367893}},\"y20\":{\"median\":{\"avgv\":3.7370613050612898,\"cv\":1.6651699259708335,\"cvpos\":0.004051043143609479,\"maxpv\":8.216795669992614,\"maxv\":8.216795669992614,\"minv\":1.402881599481208,\"q2v\":2.4734313042909957,\"q5v\":3.009777133948894,\"q8v\":5.428502607977522}}},\"stockCode\":\"HSI\"},{\"date\":\"2022-11-24T00:00:00+08:00\",\"pb\":{\"y10\":{\"median\":{\"avgv\":1.3378693220798614,\"cv\":1.3272410945365993,\"cvpos\":0.547338480292564,\"maxpv\":2.069070952857282,\"maxv\":2.069070952857282,\"minv\":0.8877918779090501,\"q2v\":1.1740450450533184,\"q5v\":1.306876893127375,\"q8v\":1.531732357638711}},\"y20\":{\"median\":{\"avgv\":1.55011145402169,\"cv\":1.3272410945365993,\"cvpos\":0.3377228525121556,\"maxpv\":2.918064158946419,\"maxv\":2.918064158946419,\"minv\":0.8877918779090501,\"q2v\":1.2334892036017695,\"q5v\":1.4739967746501792,\"q8v\":1.8763014292101567}}},\"pe_ttm\":{\"y10\":{\"median\":{\"avgv\":14.351753683002192,\"cv\":13.29072808285143,\"cvpos\":0.4697277529459569,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":9.535009809828047,\"q2v\":12.214519796396381,\"q5v\":13.536095485162216,\"q8v\":16.32801694462505}},\"y20\":{\"median\":{\"avgv\":14.842742557865401,\"cv\":13.29072808285143,\"cvpos\":0.3411669367909238,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":6.905404623928467,\"q2v\":12.380730038531832,\"q5v\":14.244903186786798,\"q8v\":16.853718508321144}}},\"ps_ttm\":{\"y10\":{\"median\":{\"avgv\":2.575085158648352,\"cv\":1.744578318394298,\"cvpos\":0.015440877691995123,\"maxpv\":3.5613399498054594,\"maxv\":3.5613399498054594,\"minv\":1.402881599481208,\"q2v\":2.205347392963663,\"q5v\":2.5786298137506027,\"q8v\":2.9509386470367893}},\"y20\":{\"median\":{\"avgv\":3.737480971129568,\"cv\":1.744578318394298,\"cvpos\":0.007698541329011345,\"maxpv\":8.216795669992614,\"maxv\":8.216795669992614,\"minv\":1.402881599481208,\"q2v\":2.4750165758126847,\"q5v\":3.0099645058827873,\"q8v\":5.428502607977522}}},\"stockCode\":\"HSI\"},{\"date\":\"2022-11-23T00:00:00+08:00\",\"pb\":{\"y10\":{\"median\":{\"avgv\":1.337947698532758,\"cv\":1.3283787991748301,\"cvpos\":0.5505891913856156,\"maxpv\":2.069070952857282,\"maxv\":2.069070952857282,\"minv\":0.8877918779090501,\"q2v\":1.1740450450533184,\"q5v\":1.306876893127375,\"q8v\":1.531732357638711}},\"y20\":{\"median\":{\"avgv\":1.5501566060394139,\"cv\":1.3283787991748301,\"cvpos\":0.34002026342451874,\"maxpv\":2.918064158946419,\"maxv\":2.918064158946419,\"minv\":0.8877918779090501,\"q2v\":1.2334892036017695,\"q5v\":1.474030674475416,\"q8v\":1.8763014292101567}}},\"pe_ttm\":{\"y10\":{\"median\":{\"avgv\":14.352248288321436,\"cv\":13.028518897493079,\"cvpos\":0.42137342543681433,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":9.535009809828047,\"q2v\":12.214519796396381,\"q5v\":13.536502454346403,\"q8v\":16.32801694462505}},\"y20\":{\"median\":{\"avgv\":14.843056985433273,\"cv\":13.028518897493079,\"cvpos\":0.29827760891590677,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":6.905404623928467,\"q2v\":12.380730038531832,\"q5v\":14.246225386055801,\"q8v\":16.853718508321144}}},\"ps_ttm\":{\"y10\":{\"median\":{\"avgv\":2.575515861410072,\"cv\":1.7325467437846822,\"cvpos\":0.01381552214546932,\"maxpv\":3.5613399498054594,\"maxv\":3.5613399498054594,\"minv\":1.402881599481208,\"q2v\":2.2062380591602206,\"q5v\":2.5789177723540053,\"q8v\":2.9509386470367893}},\"y20\":{\"median\":{\"avgv\":3.7378847196410616,\"cv\":1.7325467437846822,\"cvpos\":0.006889564336372847,\"maxpv\":8.216795669992614,\"maxv\":8.216795669992614,\"minv\":1.402881599481208,\"q2v\":2.4755840712232438,\"q5v\":3.0100570324302316,\"q8v\":5.428502607977522}}},\"stockCode\":\"HSI\"},{\"date\":\"2022-11-22T00:00:00+08:00\",\"pb\":{\"y10\":{\"median\":{\"avgv\":1.3380256128797907,\"cv\":1.3213873318107519,\"cvpos\":0.5323039414872003,\"maxpv\":2.069070952857282,\"maxv\":2.069070952857282,\"minv\":0.8877918779090501,\"q2v\":1.1740450450533184,\"q5v\":1.306876893127375,\"q8v\":1.531732357638711}},\"y20\":{\"median\":{\"avgv\":1.5500917423516278,\"cv\":1.3213873318107519,\"cvpos\":0.32887537993920973,\"maxpv\":2.918064158946419,\"maxv\":2.918064158946419,\"minv\":0.8877918779090501,\"q2v\":1.2332620830590049,\"q5v\":1.474030674475416,\"q8v\":1.8763014292101567}}},\"pe_ttm\":{\"y10\":{\"median\":{\"avgv\":14.352809511541079,\"cv\":12.962966601153491,\"cvpos\":0.407557903291345,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":9.535009809828047,\"q2v\":12.214519796396381,\"q5v\":13.53681306915283,\"q8v\":16.32801694462505}},\"y20\":{\"median\":{\"avgv\":14.843596740096634,\"cv\":12.962966601153491,\"cvpos\":0.28936170212765955,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":6.905404623928467,\"q2v\":12.380730038531832,\"q5v\":14.247547585324806,\"q8v\":16.853718508321144}}},\"ps_ttm\":{\"y10\":{\"median\":{\"avgv\":2.575942754099165,\"cv\":1.7106013679154553,\"cvpos\":0.011783827712312069,\"maxpv\":3.5613399498054594,\"maxv\":3.5613399498054594,\"minv\":1.402881599481208,\"q2v\":2.2066370632116525,\"q5v\":2.579363454227148,\"q8v\":2.9509386470367893}},\"y20\":{\"median\":{\"avgv\":3.73838431451144,\"cv\":1.7106013679154553,\"cvpos\":0.005876393110435664,\"maxpv\":8.216795669992614,\"maxv\":8.216795669992614,\"minv\":1.402881599481208,\"q2v\":2.4769332090223637,\"q5v\":3.010936526690377,\"q8v\":5.428502607977522}}},\"stockCode\":\"HSI\"},{\"date\":\"2022-11-21T00:00:00+08:00\",\"pb\":{\"y10\":{\"median\":{\"avgv\":1.3381013223123974,\"cv\":1.3196394649697325,\"cvpos\":0.5274278748476229,\"maxpv\":2.069070952857282,\"maxv\":2.069070952857282,\"minv\":0.8877918779090501,\"q2v\":1.1740450450533184,\"q5v\":1.306876893127375,\"q8v\":1.531732357638711}},\"y20\":{\"median\":{\"avgv\":1.550026403820737,\"cv\":1.3196394649697325,\"cvpos\":0.3264437689969605,\"maxpv\":2.918064158946419,\"maxv\":2.918064158946419,\"minv\":0.8877918779090501,\"q2v\":1.2331470283761374,\"q5v\":1.474030674475416,\"q8v\":1.8763014292101567}}},\"pe_ttm\":{\"y10\":{\"median\":{\"avgv\":14.353337533470905,\"cv\":13.044906971577976,\"cvpos\":0.42340511986997154,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":9.535009809828047,\"q2v\":12.214519796396381,\"q5v\":13.537033821980675,\"q8v\":16.32801694462505}},\"y20\":{\"median\":{\"avgv\":14.844203602521942,\"cv\":13.044906971577976,\"cvpos\":0.2996960486322188,\"maxpv\":25.857069329266768,\"maxv\":25.857069329266768,\"minv\":6.905404623928467,\"q2v\":12.380730038531832,\"q5v\":14.247942008687193,\"q8v\":16.853718508321144}}},\"ps_ttm\":{\"y10\":{\"median\":{\"avgv\":2.5763676891965015,\"cv\":1.7458028421161624,\"cvpos\":0.014628199918732222,\"maxpv\":3.5613399498054594,\"maxv\":3.5613399498054594,\"minv\":1.402881599481208,\"q2v\":2.2067166872036834,\"q5v\":2.579631253152183,\"q8v\":2.9509386470367893}},\"y20\":{\"median\":{\"avgv\":3.738881344950361,\"cv\":1.7458028421161624,\"cvpos\":0.00729483282674772,\"maxpv\":8.216795669992614,\"maxv\":8.216795669992614,\"minv\":1.402881599481208,\"q2v\":2.476938820734823,\"q5v\":3.012189796145483,\"q8v\":5.428502607977522}}},\"stockCode\":\"HSI\"}]}";
        fundamentalHSIResult_RootVO resultObj = (fundamentalHSIResult_RootVO) getResult_fundamentalHSI.getAllIndexResultObjHK(resultJson);
        double result = calculateFundamentalHSI(resultObj);
        System.out.println("综合百分位为：" + new DecimalFormat("0.00%").format(result));
        detailPositionHSI(resultObj);
        targetChangeHSI(resultObj);
    }

    // 计算综合百分位
    public static double calculateFundamentalHSI(fundamentalHSIResult_RootVO resultObj) {
        fundamentalHSIResult_DataVO vo = resultObj.getData().get(0);
        double pe_10_cvpos = vo.getPe_ttm().getY10().getMedian().getCvpos();
        double pb_10_cvpos = vo.getPb().getY10().getMedian().getCvpos();
        double ps_10_cvpos = resultObj.getData().get(0).getPs_ttm().getY10().getMedian().getCvpos();

        double pe_20_cvpos = vo.getPe_ttm().getY20().getMedian().getCvpos();
        double pb_20_cvpos = vo.getPb().getY20().getMedian().getCvpos();
        double ps_20_cvpos = vo.getPs_ttm().getY20().getMedian().getCvpos();
        return (pe_10_cvpos + pb_10_cvpos + ps_10_cvpos + pe_20_cvpos + pb_20_cvpos + ps_20_cvpos) / 6;
    }

    // 查看10年以及20年的细节
    public static void detailPositionHSI(fundamentalHSIResult_RootVO resultObj) {
        fundamentalHSIResult_DataVO vo = resultObj.getData().get(0);
        System.out.println("20年 pe 百分位为：" + new DecimalFormat("0.00%").format(vo.getPe_ttm().getY20().getMedian().getCvpos()));
        System.out.println("20年 pb 百分位为：" + new DecimalFormat("0.00%").format(vo.getPb().getY20().getMedian().getCvpos()));
        System.out.println("20年 ps 百分位为：" + new DecimalFormat("0.00%").format(vo.getPs_ttm().getY20().getMedian().getCvpos()));
        System.out.println();
        System.out.println("10年 pe 百分位为：" + new DecimalFormat("0.00%").format(vo.getPe_ttm().getY10().getMedian().getCvpos()));
        System.out.println("10年 pb 百分位为：" + new DecimalFormat("0.00%").format(vo.getPb().getY10().getMedian().getCvpos()));
        System.out.println("10年 ps 百分位为：" + new DecimalFormat("0.00%").format(vo.getPs_ttm().getY10().getMedian().getCvpos()));
        System.out.println();

    }

    // 到达目标点位需要的幅度
    public static void targetChangeHSI(fundamentalHSIResult_RootVO resultObj) {
        fundamentalHSIResult_DataVO vo = resultObj.getData().get(0);
        //当前分位点的具体数值
        double pe_20_cv = vo.getPe_ttm().getY20().getMedian().getCv();
        double pb_20_cv = vo.getPb().getY20().getMedian().getCv();
        double ps_20_cv = vo.getPs_ttm().getY20().getMedian().getCv();

        double pe_10_cv = vo.getPe_ttm().getY10().getMedian().getCv();
        double pb_10_cv = vo.getPb().getY10().getMedian().getCv();
        double ps_10_cv = vo.getPs_ttm().getY10().getMedian().getCv();
        //80分位点的具体数值
        double pe_20_q8v = vo.getPe_ttm().getY20().getMedian().getQ8v();
        double pb_20_q8v = vo.getPb().getY20().getMedian().getQ8v();
        double ps_20_q8v = vo.getPs_ttm().getY20().getMedian().getQ8v();

        double pe_10_q8v = vo.getPe_ttm().getY10().getMedian().getQ8v();
        double pb_10_q8v = vo.getPb().getY10().getMedian().getQ8v();
        double ps_10_q8v = vo.getPs_ttm().getY10().getMedian().getQ8v();

        double result_q8v = ((pe_10_q8v - pe_10_cv) / pe_10_cv + (pb_10_q8v - pb_10_cv) / pb_10_cv + (ps_10_q8v - ps_10_cv) / ps_10_cv + (pe_20_q8v - pe_20_cv) / pe_20_cv + (pb_20_q8v - pb_20_cv) / pb_20_cv + (ps_20_q8v - ps_20_cv) / ps_20_cv) / 6;
        System.out.println("到达80分位点还需要的幅度为：" + new DecimalFormat("0.00%").format(result_q8v));
        //20分位点的具体数值
        double pe_20_q2v = vo.getPe_ttm().getY20().getMedian().getQ2v();
        double pb_20_q2v = vo.getPb().getY20().getMedian().getQ2v();
        double ps_20_q2v = vo.getPs_ttm().getY20().getMedian().getQ2v();

        double pe_10_q2v = vo.getPe_ttm().getY10().getMedian().getQ2v();
        double pb_10_q2v = vo.getPb().getY10().getMedian().getQ2v();
        double ps_10_q2v = vo.getPs_ttm().getY10().getMedian().getQ2v();

        double result_q2v = ((pe_10_q2v - pe_10_cv) / pe_10_cv + (pb_10_q2v - pb_10_cv) / pb_10_cv + (ps_10_q2v - ps_10_cv) / ps_10_cv + (pe_20_q2v - pe_20_cv) / pe_20_cv + (pb_20_q2v - pb_20_cv) / pb_20_cv + (ps_20_q2v - ps_20_cv) / ps_20_cv) / 6;
        System.out.println("到达20分位点还需要的幅度为：" + new DecimalFormat("0.00%").format(result_q2v));

    }

}
